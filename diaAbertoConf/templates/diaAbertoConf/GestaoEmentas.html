
{% extends 'diaAbertoConf/Home.html' %}

{% block navContent %}
    <ul class="navbar-nav mr-auto">
		{% if user.is_authenticated %}
			{% if perms.atividades.view_inscricao%}
				<li class="nav-item">
    				<a class="nav-link" href="#">Inscrições</a>
    			</li>
			{% endif %}
			{% if perms.atividades.view_atividade%}
				{% if  perms.atividades.view_edificio and perms.atividades.view_campus and perms.atividades.view_local and perms.atividades.view_unidadeorganica and  perms.atividades.view_departamento and perms.atividades.view_tematica and perms.atividades.view_material and perms.atividades.view_sessaoatividade %}
    				<li class="nav-item dropdown">
    					<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
							Atividades
    					</a>
    					<div class="dropdown-menu" aria-labelledby="navbarDropdown">
    						<a class="dropdown-item" href="{% url 'atividades:allAtividades'%}">Atividades</a>
    						<a class="dropdown-item" href="{% url 'atividades:allEdificios'%}">Edifícios</a>
    						<a class="dropdown-item" href="{% url 'atividades:allCampus'%}">Campus</a>
    						<a class="dropdown-item" href="{% url 'atividades:allLocais'%}">Locais</a>
    						<a class="dropdown-item" href="{% url 'atividades:allUnidadeOrganicas'%}">Unidade Orgânicas</a>
    						<a class="dropdown-item" href="{% url 'atividades:allDepartamentos'%}">Departamentos</a>
    						<a class="dropdown-item" href="{% url 'atividades:allTematicas'%}">Temáticas</a>
    						<a class="dropdown-item" href="{% url 'atividades:allMateriais'%}">Materiais</a>
    						<a class="dropdown-item" href="{% url 'atividades:allSessoes'%}">Horários de Sessões</a>
						</div>
    				</li>
				{%else%}
					<li class="nav-item">
    					<a class="nav-link" href="{% url 'atividades:allAtividades' %}">Atividades</a>
    				</li>  
				{%endif%}
			{% endif %}
			{% if perms.diaAbertoConf.view_diaaberto%}
				<li class="nav-item">
    				<a class="nav-link" href="{% url 'diaAbertoConf:editConfig' %}">Configuração do Dia Aberto</a>
    			</li>
			{% endif %}
			{% if perms.diaAbertoConf.view_transporte %}        	      		
    			<li class="nav-item dropdown">
    				<a class="nav-link dropdown-toggle" href="#" id="DiaAbertoConfNavbar" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    					Transportes
    				</a>
    				<div class="dropdown-menu" aria-labelledby="DiaAbertoConfNavbar">
    					<a class="dropdown-item" href="{% url 'diaAbertoConf:allTransportes'%}">Gestão de Transportes</a>
    				  	<a class="dropdown-item" href="{% url 'diaAbertoConf:allHorarios'%}">Horários de Transportes</a>
    				</div>
    			</li>
			{% endif %}
			{% if perms.diaAbertoConf.view_ementa %}  
    			<li class="nav-item">
    				<a class="nav-link active" href="{% url 'diaAbertoConf:gestaoEmentas'%}">Almoços</a>
    			</li>
			{% endif %}
			{% if perms.tarefas.view_tarefa %}
				<li class="nav-item">
    				<a class="nav-link" href="{% url 'tarefas:showTarefas' %}">Tarefas</a>
    			</li>
			{% endif %}
		{% endif %}
	</ul>
{% endblock %}

{% block content %}
<div class="container mb-5 pb-5">
    	    <div class = "row">
    		    <div class = "col-sm-6 ">
                    <nav aria-label="breadcrumb">
						<ol class="breadcrumb bg-white">
							<li class="breadcrumb-item"><a href="{% url 'diaAbertoConf:index' %}">Início</a></li>
							<li class="breadcrumb-item active">Almocos</li>
						</ol>
					</nav>
                    <hr>
    		    </div>
            </div>
            {% comment %} <div class="container">
                <a href="{% url 'diaAbertoConf:showNewEmenta'%}" class="btn btn-info btn-lg">
                    <span class="glyphicon glyphicon-plus"></span> Nova Ementa 
                </a>
            </div> {% endcomment %}
			<a type="button" class="btn btn-outline-success mr-2 mb-4" href="{% url 'diaAbertoConf:showNewEmenta' %}"> + Adicionar Ementa</a>
            <p></p>
    	    <div class = "row">
    		    <div class = "col-sm-10 ">
					{% if allEmentas %}
    		    		<table class="table">
                    	    <thead>
                    	        <tr>
                    	            <th scope="col">Dia</th>
                                    <th scope="col"></th>
                    	            <th scope="col"></th>
                    	        </tr>
                    	    </thead>
                    	    <tbody>
								{% for ementa in allEmentas %}
                    	        	<tr>
                    	        	    <th scope="row">{{ ementa.dia }}</th>
                    	        	    <td><a class="btn btn-outline-success far fa-edit" href="{% url 'diaAbertoConf:showEditEmenta' id=ementa.id %}"  ></a></td>
                    	        	   	<td><a class="btn btn-outline-danger fas fa-trash-alt" href="" data-toggle="modal" data-target="#Modal" data-id="{% url 'diaAbertoConf:deleteEmenta' id=ementa.id %}"></a></td>
										<div class="modal" id="Modal">
											<div class="modal-dialog">
												<div class="modal-content">

												<!-- Modal Header -->
												<div class="modal-header">
													<h4 class="modal-title">Aviso</h4>
													<button type="button" class="close" data-dismiss="modal">×</button>
												</div>

												<!-- Modal body -->
												<div class="modal-body">
													Tem a certeza que pretende eliminar este item?
												</div>

												<!-- Modal footer -->
												<div class="modal-footer">
													<form id="deleteModal" action="" method="post">
														{% csrf_token %}
													<button type="submit" class="btn btn-success" >Sim</button>
													<button type="button" class="btn btn-danger" data-dismiss="modal">Nao</button>
												</div>

											</div>
										</div>
									</tr>
								{% endfor %}
                    	    </tbody>
                    	</table>
					{% else %}
						<h2>Dados não se encontram disponiveis</h2>
					{% endif %}
    		    </div>
    	    </div>
    	</div>
{% endblock content%}
{% block js %}
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    
    <script type="text/javascript">
            $(function () {
                $('.delete').click(function (){
                    var data_var = $(this).data('id');
                    $("#deleteModal").attr("action", data_var);
                })
            });
    </script>
{% endblock js %}
